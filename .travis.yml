language: node_js
node_js:
    - "15"
services:
  - mysql
# 設定參數(Travis CI 會按照參數分別執行)
env:
  - NODE_ENV=test
# 在 install 前執行的指令
before_install:
  - mysql -e 'CREATE DATABASE IF NOT EXISTS life_guard default character set utf8mb4 collate utf8mb4_unicode_ci;'
  - npm install sequelize sequelize-cli mysql2 -g
  - sequelize db:migrate
script:
  - echo "skipping tests"
# 在執行測試之前的指令
# before_script:
  
deploy:
  provider: heroku
  skip_cleanup: true
  api_key: i8LIeeNyC1SFxdH1/HUfKNXAO0clZR6iSjYXQQCdL9odBx3VljaK1kUn35taeOT/Nj/SB/AAI7xRLPpyYeQZlLVTd1Ec4C+daMenAQBV8s4pY2qbeIpDvw6e6vIv9I4x6COMj5OwhNfoX7fOpnr4H8mvCT0eSIAMZmVLJmd5DT7ka4fzVEAGNeZI0Ju02jlsb4w43pnAyEpNC6OFLJ1SGT0g5/3l0UC96zKOopRKEyj8FW6yWnFllNp33MSsGwT35M1KkHVv03oAK9KV97N9PeGPQsW8OQ/3UjnYEct9DfAoKbvqGfRTG5xxpyASshkK4yU9oWJVFL15fYDes1aG1V5Yegx/gdTByLys/5+LDUV6qJXOBFv8sGCpPgd/wacohci4uMutGkoXcBhIS58jUTuEOpZD7cZGaAhO6XgFE/37ODqM8rDN0Uh6FVy2c3gKTJ2ykZTkFoc0c4i/vIdRmqXETba14B7hXAvQmpYwNCnQt18JZqpHWvPKcnacUl9DDnB4yoJsVKzt41Pr7vwuK6+iqKaIsfJX9Fd1oLDO3Dk5qwfaSfpM6ZsuVhpQUFVyXbkSTKsCgyT/HrktD1PPibqWiQ31aXt7wdVHNHEUtJ3k9D6lveRO8RMnIVkuagZTtvgK3r/U0xF7C4UgAA05V3cV8XMDyBOAA5A+Xm5u2hk=
  app: lifeguard2021
  on:
    repo: c6arliec6en/lifeguard-backend-test
    branch: main